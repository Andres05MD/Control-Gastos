Idioma: Español
Librerias: Next.js (App Router), Tailwind CSS, React, TypeScript, SweetAlert2, Firebase (Auth & Firestore), Recharts, React-Icons, React-Datepicker.

1. Planteamiento General:
   Desarrollar una aplicación web progresiva y segura para la gestión integral de finanzas personales. Cada usuario tendrá un entorno privado donde podrá registrar y visualizar sus flujos de dinero, metas de ahorro, listas de compras y control de capital físico/cripto. El sistema destaca por un diseño "Premium" con Glassmorphism, integración de tasas de cambio (BCV) y métricas en tiempo real.

2. Objetivos Principales:
   - Implementar autenticación segura con Firebase (Email/Password).
   - CRUD ágil de transacciones (Ingresos/Gastos) y Ahorros (Físico/USDT).
   - Gestión de Listas de Compras con cálculo estimado en USD y BS.
   - Panel de control (Dashboard) con widgets interactivos y alertas de presupuesto.
   - Interfaz moderna "Dark Mode Glassmorphism" altamente responsiva.
   - Conversión automática de divisas (USD -> VES) basada en tasa BCV.

3. Estructura de la Base de Datos (Firebase Firestore):
   
   Colección: users
   - uid (string)
   - email (string)
   - displayName (string)
   - monthlyBudget (number): Límite de gasto mensual
   - monthlySalary (number): Salario mensual esperado
   - savingsPhysical (number): Saldo en efectivo
   - savingsUSDT (number): Saldo en USDT
   - createdAt (timestamp)

     Sub-Colección: savings_transactions (dentro de users)
     - id (string)
     - amount (number)
     - type (string): 'deposit' | 'withdrawal'
     - method (string): 'physical' | 'usdt'
     - description (string)
     - date (timestamp)

     Sub-Colección: shopping_lists (dentro de users)
     - id (string)
     - name (string)
     - createdAt (timestamp)
     - items (array of objects): { id, name, quantity, price, completed }

     Sub-Colección: savings_goals (dentro de users)
     - id (string)
     - name (string)
     - targetAmount (number)
     - currentAmount (number)
     - createdAt (timestamp)

   Colección: transactions (Global o vinculada por userId)
   - id (string)
   - userId (string)
   - type (string): 'ingreso' | 'gasto'
   - category (string)
   - amount (number)
   - date (timestamp)
   - description (string)
   - period (string)
   - createdAt (timestamp)

4. Estructura de Carpetas del Proyecto (Next.js App Router):

   /src
     /app
       /layout.tsx       (Configuración global)
       /page.tsx         (Redirección)
       /(auth)           
         /login/page.tsx
         /register/page.tsx
       /dashboard        
         /page.tsx       (Main Dashboard: Widgets, Big Numbers, Quick Actions)
         /movimientos
           /page.tsx     (Historial y Registro de Ingresos/Gastos)
         /ahorros
           /page.tsx     (Gestión de Efectivo y USDT, Historial de Ahorros)
         /listas
           /page.tsx     (Listas de compras interactivas con checkbox y calculadora)
         /reportes
           /page.tsx     (Gráficos, Resumen Financiero y de Ahorros)
         /perfil
           /page.tsx     (Edición de usuario, Seguridad)
     
     /components
       /ui               (Widgets específicos: CryptoCashWallet, SalaryPlanning, etc.)
         - RecentTransactions.tsx
         - ExchangeRateWidget.tsx
         - SavingsGoalsWidget.tsx
         - BudgetAlertWidget.tsx
         - SalaryPlanningWidget.tsx
         - CryptoCashWalletWidget.tsx
       /layout           (Sidebar con navegación activa)
       /charts           (FinancialCharts: Pie, Bar charts)
       /forms            (TransactionForm)
     
     /lib
       firebase.ts
       currency.ts       (API Fetching para tasa BCV)
       utils.ts
     
     /hooks              (Lógica de negocio encapsulada)
       - useAuth.tsx
       - useTransactions.ts
       - useSavingsTransactions.ts
       - useShoppingLists.ts
       - useGoals.ts

7. Estado Actual y Logros Recientes (Actualizado):
   - [x] Optimización de Rendimiento: Implementación de Context API (TransactionsContext, UserDataContext) para reducir lecturas a Firestore en un 80%.
   - [x] Sistema de Metas "User-Centric": Ahorros vinculados a IDs de usuario con actualizaciones atómicas de saldo.
   - [x] UX Mejorada: Accesos Rápidos en Dashboard y Navegación intuitiva por Click en Widgets.
   - [x] Edición de Movimientos: Funcionalidad completa para modificar registros pasados.
   - [x] Integración BCV: Caché de 15 min para reducir peticiones a la API externa.
   - [x] Búsqueda y Paginación Global: Implementación de filtros de búsqueda y paginación en todas las listas (Movimientos, Deudas, Ahorros, Gastos Fijos, Listas).

5. Secciones y Funcionalidades Detalladas:
   
   - Dashboard:
     * Accesos Rápidos: Botones grandes para Registrar, Reportes, Metas y Compras.
     * Widgets Interactivos: Click para ver detalles de Ahorros, Presupuesto y Salario.
     * Alerta de Presupuesto: Feedback visual (Colores Semáforo) según % de gasto.
     * Planificación Salarial: Edición directa del sueldo mensual esperado.
     * Números grandes con conversión estimada a Bs. (Tasa BCV con Caché).

   - Movimientos:
     * Registro con autocompletado de fecha y categoría.
     * Edición y Borrado de transacciones.
     * Detección automática de Tasa de Cambio al seleccionar VES.
     * Buscador integrado (Descripción, Categoría, Monto) y Paginación.
   
   - Ahorros y Metas (CORE):
     * Wallet Virtual: Control de Efectivo y USDT.
     * Metas de Ahorro: Creación de objetivos (Carro, Viaje) con barra de progreso.
     * Aportes Atómicos: Al "Aportar" a una meta, se descuenta automáticamente de la Wallet disponible.
     * Historial Unificado: Transacciones de ahorro reflejadas en tiempo real.
     * Buscador y Paginación en historial de movimientos.

   - Listas de Compras:
     * Items con Checkbox de completado.
     * Precios en USD con proyección en Bs.
     * Gestión de múltiples listas con búsqueda, ordenamiento y paginación.

   - Deudas y Gastos Fijos:
     * Control de deudas por cobrar/pagar con historial de abonos.
     * Seguimiento de gastos fijos mensuales con barra de progreso.
     * Búsqueda y Paginación para manejar grandes volúmenes de datos.

   - Reportes:
     * Gráficos de Torta (Gastos por Categoría).
     * Balance Mensual (Ingresos vs Gastos).
     * Métricas de Ahorro Neto.

6. Estilo y UX:
   - Diseño Glassmorphism: Fondos translúcidos (bg-slate-900/50), desenfoques (backdrop-blur-md).
   - Sombras y Luces: Efectos de neón (box-shadow) en hover.
   - Interactividad: SweetAlert2 para formularios complejos (Aportes, Edición Salario).
   - Feedback: Spinners de carga y transiciones suaves (transition-all duration-300).
   - Componentes Reutilizables: PaginationControls para consistencia visual.
